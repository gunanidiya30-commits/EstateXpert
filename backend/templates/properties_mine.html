<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EstateXpert | My Properties</title>
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
    >
</head>

<body class="bg-light">

<!-- HEADER -->
<nav class="navbar navbar-light bg-white shadow-sm px-4">
    <a href="/dashboard" class="navbar-brand fw-bold">EstateXpert</a>
</nav>

<!-- HERO -->
<section class="bg-dark text-light py-5">
    <div class="container">
        <h1 class="fw-bold mb-2">My Property Listings</h1>
        <p class="mb-0 text-light">
            Manage all properties you’ve listed on EstateXpert.
            Edit details, review pricing, or remove listings anytime.
        </p>
    </div>
</section>

<div class="container my-5">

    <!-- FILTERS -->
    <div class="card shadow-sm border-0 mb-4">
        <div class="card-body">
            <h5 class="fw-semibold mb-2">Filter Your Listings</h5>
            <p class="text-muted mb-3">
                Narrow down your properties using filters such as city,
                price range, or property type.
            </p>
            {% include "partials/filters.html" %}
        </div>
    </div>

    <!-- CONTEXT -->
    <div class="mb-4">
        <h4 class="fw-semibold">Your Properties</h4>
        <p class="text-muted mb-0">
            These are the properties currently listed under your account.
        </p>
    </div>

    {% if properties %}
        <div class="row g-4">
            {% for property in properties %}
                <div class="col-md-4">
                    <div class="card shadow-sm h-100 border-0">
                        <div class="card-body d-flex flex-column">

                            <h5 class="fw-semibold mb-1">
                                {{ property.title }}
                            </h5>

                            <p class="text-muted mb-2">
                                {{ property.city }}, {{ property.state }}
                            </p>

                            <p class="fw-semibold mb-3">
                                ₹ {{ property.price }}
                            </p>

                            <div class="mt-auto d-flex gap-2">
                                <a
                                    href="/properties/{{ property.id }}/edit"
                                    class="btn btn-outline-primary btn-sm w-100"
                                >
                                    Edit
                                </a>

                                <a
                                    href="/properties/{{ property.id }}/delete"
                                    class="btn btn-outline-danger btn-sm w-100"
                                    onclick="return confirm('Are you sure you want to delete this property?');"
                                >
                                    Delete
                                </a>
                            </div>

                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}

        <!-- EMPTY STATE -->
        <div class="card shadow-sm border-0">
            <div class="card-body text-center p-5">
                <h5 class="fw-semibold mb-2">No properties listed yet</h5>
                <p class="text-muted mb-3">
                    You haven’t added any properties.
                    Create a listing to make it visible to buyers and investors.
                </p>
                <a href="/properties/create" class="btn btn-primary">
                    Add Your First Property
                </a>
            </div>
        </div>

    {% endif %}

    <!-- BACK -->
    <div class="mt-4">
        <a href="/dashboard" class="btn btn-outline-secondary">
            ← Back to Dashboard
        </a>
    </div>

</div>

<!-- FOOTER -->
<footer class="text-center py-4 text-muted border-top">
    © 2026 EstateXpert ·
    <a href="/contact" class="text-decoration-none">Contact Support</a>
</footer>

</body>
</html>
