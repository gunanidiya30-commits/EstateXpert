<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EstateXpert | Browse Properties</title>
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
    >
</head>

<body class="bg-light">

<!-- TOP NAV -->
<nav class="navbar navbar-light bg-white shadow-sm">
    <div class="container">
        <span class="navbar-brand fw-bold">EstateXpert</span>
        <a href="/dashboard" class="btn btn-outline-primary btn-sm">
            ← Back to Dashboard
        </a>
    </div>
</nav>

<!-- HERO / PAGE INTRO -->
<section class="bg-dark text-light py-5">
    <div class="container text-center">
        <h1 class="fw-bold mb-3">
            Browse Available Properties
        </h1>
        <p class="lead mb-0">
            Discover properties across cities and localities.
            Use filters to refine your search and explore suitable options.
        </p>
    </div>
</section>

<!-- MAIN CONTENT -->
<section class="container my-5">

    <!-- FILTER CONTEXT -->
    <div class="mb-4">
        <h4 class="fw-semibold">Refine your search</h4>
        <p class="text-muted">
            Adjust location, price range, property type, and configuration
            to narrow down your results.
        </p>
    </div>

    <!-- FILTERS (WORKING) -->
    <div class="card shadow-sm border-0 mb-5">
        <div class="card-body">
            <form method="GET">
                {% include "partials/filters.html" %}
            </form>
        </div>
    </div>

    <!-- RESULTS HEADER -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="fw-semibold mb-0">Available Properties</h4>
        <span class="text-muted small">
            Showing results based on selected filters
        </span>
    </div>

    <!-- RESULTS TABLE -->
    <div class="card shadow-sm border-0">
        <div class="card-body p-0">

            {% if properties %}
            <div class="table-responsive">
                <table class="table table-hover mb-0 align-middle">
                    <thead class="table-light">
                        <tr>
                            <th>Title</th>
                            <th>Price</th>
                            <th>BHK</th>
                            <th>Type</th>
                            <th>City</th>
                            <th>Locality</th>
                            <th class="text-center">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for p in properties %}
                        <tr>
                            <td class="fw-semibold">{{ p.title }}</td>
                            <td>{{ p.price }}</td>
                            <td>{{ p.bhk }}</td>
                            <td>{{ p.property_type }}</td>
                            <td>{{ p.city }}</td>
                            <td>{{ p.locality }}</td>
                            <td class="text-center">
                                <a
                                    href="/properties/{{ p.id }}"
                                    class="btn btn-sm btn-primary"
                                >
                                    View Details
                                </a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <!-- EMPTY STATE -->
            <div class="text-center p-5">
                <h5 class="fw-semibold mb-2">No properties found</h5>
                <p class="text-muted mb-0">
                    Try adjusting your filters or clearing some criteria
                    to see more listings.
                </p>
            </div>
            {% endif %}

        </div>
    </div>

</section>

<!-- FOOTER -->
<footer class="text-center py-4 text-muted border-top">
    © 2026 EstateXpert ·
    <a href="/contact" class="text-decoration-none">Contact</a>
</footer>

</body>
</html>
