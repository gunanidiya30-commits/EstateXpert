<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit Property | EstateXpert</title>
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
    >
</head>

<body class="bg-light">

<!-- HEADER -->
<nav class="navbar navbar-light bg-white shadow-sm px-4">
    <a href="/dashboard" class="navbar-brand fw-bold">EstateXpert</a>
</nav>

<!-- HERO -->
<section class="bg-dark text-light py-5">
    <div class="container">
        <h1 class="fw-bold mb-2">Edit Property Listing</h1>
        <p class="mb-0 text-light">
            Update property details, pricing, or images.
            All changes will reflect immediately on the listing.
        </p>
    </div>
</section>

<!-- FORM -->
<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">

            <div class="card shadow-sm border-0 mb-4">
                <div class="card-body p-4">

                    <h4 class="fw-semibold mb-2">Property Details</h4>
                    <p class="text-muted mb-4">
                        Review and update the information below.
                        Existing values are pre‑filled for convenience.
                    </p>

                    <!-- UPDATE FORM -->
                    <form
                        method="POST"
                        action="/properties/{{ property.id }}/update"
                        enctype="multipart/form-data"
                    >

                        <div class="mb-3">
                            <label class="form-label">Property Title</label>
                            <input
                                name="title"
                                class="form-control"
                                value="{{ property.title }}"
                                required
                            >
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea
                                name="description"
                                class="form-control"
                                rows="4"
                                required
                            >{{ property.description }}</textarea>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Price</label>
                                <input
                                    name="price"
                                    type="number"
                                    class="form-control"
                                    value="{{ property.price }}"
                                    required
                                >
                            </div>

                            <div class="col-md-6 mb-3">
                                <label class="form-label">Area (sqft)</label>
                                <input
                                    name="area_sqft"
                                    type="number"
                                    class="form-control"
                                    value="{{ property.area_sqft }}"
                                    required
                                >
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">BHK</label>
                                <input
                                    name="bhk"
                                    type="number"
                                    class="form-control"
                                    value="{{ property.bhk }}"
                                    required
                                >
                            </div>

                            <div class="col-md-6 mb-3">
                                <label class="form-label">Property Type</label>
                                <select name="property_type" class="form-select" required>
                                    <option value="residential" {% if property.property_type == "residential" %}selected{% endif %}>Residential</option>
                                    <option value="commercial" {% if property.property_type == "commercial" %}selected{% endif %}>Commercial</option>
                                    <option value="rental" {% if property.property_type == "rental" %}selected{% endif %}>Rental</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">City</label>
                                <input
                                    name="city"
                                    class="form-control"
                                    value="{{ property.city }}"
                                    required
                                >
                            </div>

                            <div class="col-md-6 mb-3">
                                <label class="form-label">Locality</label>
                                <input
                                    name="locality"
                                    class="form-control"
                                    value="{{ property.locality }}"
                                    required
                                >
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="form-label">Add More Images</label>
                            <input
                                type="file"
                                name="images"
                                class="form-control"
                                multiple
                                accept="image/*"
                            >
                            <small class="text-muted">
                                Uploaded images will be added to the existing gallery.
                            </small>
                        </div>

                        <div class="d-flex justify-content-between">
                            <a href="/properties/mine" class="btn btn-outline-secondary">
                                ← Back to My Properties
                            </a>

                            <button type="submit" class="btn btn-primary">
                                Save Changes
                            </button>
                        </div>

                    </form>

                </div>
            </div>

            <!-- DELETE SECTION -->
            <div class="card shadow-sm border-0">
                <div class="card-body p-4">

                    <h5 class="fw-semibold text-danger mb-2">Danger Zone</h5>
                    <p class="text-muted mb-3">
                        Deleting a property will permanently remove it from the platform.
                        This action cannot be undone.
                    </p>

                    <form
                        method="POST"
                        action="/properties/{{ property.id }}/delete"
                        onsubmit="return confirm('Are you sure you want to delete this property?');"
                    >
                        <button class="btn btn-danger">
                            Delete Property
                        </button>
                    </form>

                </div>
            </div>

        </div>
    </div>
</div>

<!-- FOOTER -->
<footer class="text-center py-4 text-muted border-top">
    © 2026 EstateXpert ·
    <a href="/contact" class="text-decoration-none">Contact Support</a>
</footer>

</body>
</html>
